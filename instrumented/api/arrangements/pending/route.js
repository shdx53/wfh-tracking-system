function cov_903tvwx0m() {
  var path = "/Users/ongsweelong/Library/CloudStorage/OneDrive-SingaporeManagementUniversity/Y3S1/SPM IS212/Project/wfh-tracking-system/app/api/arrangements/pending/route.js";
  var hash = "e587d9a8dd7f2f4256fbc89eacef6b1b7609c6c9";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/ongsweelong/Library/CloudStorage/OneDrive-SingaporeManagementUniversity/Y3S1/SPM IS212/Project/wfh-tracking-system/app/api/arrangements/pending/route.js",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 2
        },
        end: {
          line: 129,
          column: 3
        }
      },
      "1": {
        start: {
          line: 9,
          column: 17
        },
        end: {
          line: 9,
          column: 35
        }
      },
      "2": {
        start: {
          line: 12,
          column: 4
        },
        end: {
          line: 12,
          column: 38
        }
      },
      "3": {
        start: {
          line: 15,
          column: 25
        },
        end: {
          line: 15,
          column: 53
        }
      },
      "4": {
        start: {
          line: 16,
          column: 20
        },
        end: {
          line: 16,
          column: 47
        }
      },
      "5": {
        start: {
          line: 19,
          column: 4
        },
        end: {
          line: 24,
          column: 5
        }
      },
      "6": {
        start: {
          line: 20,
          column: 6
        },
        end: {
          line: 23,
          column: 8
        }
      },
      "7": {
        start: {
          line: 27,
          column: 27
        },
        end: {
          line: 34,
          column: 5
        }
      },
      "8": {
        start: {
          line: 37,
          column: 4
        },
        end: {
          line: 42,
          column: 5
        }
      },
      "9": {
        start: {
          line: 38,
          column: 6
        },
        end: {
          line: 41,
          column: 8
        }
      },
      "10": {
        start: {
          line: 45,
          column: 25
        },
        end: {
          line: 45,
          column: 40
        }
      },
      "11": {
        start: {
          line: 48,
          column: 39
        },
        end: {
          line: 53,
          column: 5
        }
      },
      "12": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 115,
          column: 5
        }
      },
      "13": {
        start: {
          line: 60,
          column: 6
        },
        end: {
          line: 109,
          column: 8
        }
      },
      "14": {
        start: {
          line: 111,
          column: 6
        },
        end: {
          line: 114,
          column: 8
        }
      },
      "15": {
        start: {
          line: 118,
          column: 4
        },
        end: {
          line: 118,
          column: 52
        }
      },
      "16": {
        start: {
          line: 120,
          column: 4
        },
        end: {
          line: 123,
          column: 6
        }
      },
      "17": {
        start: {
          line: 126,
          column: 4
        },
        end: {
          line: 128,
          column: 5
        }
      },
      "18": {
        start: {
          line: 127,
          column: 6
        },
        end: {
          line: 127,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "GET",
        decl: {
          start: {
            line: 5,
            column: 22
          },
          end: {
            line: 5,
            column: 25
          }
        },
        loc: {
          start: {
            line: 5,
            column: 35
          },
          end: {
            line: 130,
            column: 1
          }
        },
        line: 5
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 24,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 19
      },
      "1": {
        loc: {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 42,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 37
      },
      "2": {
        loc: {
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 115,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 115,
            column: 5
          }
        }, {
          start: {
            line: 110,
            column: 11
          },
          end: {
            line: 115,
            column: 5
          }
        }],
        line: 59
      },
      "3": {
        loc: {
          start: {
            line: 126,
            column: 4
          },
          end: {
            line: 128,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 126,
            column: 4
          },
          end: {
            line: 128,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 126
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0
    },
    f: {
      "0": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e587d9a8dd7f2f4256fbc89eacef6b1b7609c6c9"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_903tvwx0m = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_903tvwx0m();
import connection from "@/app/lib/db";
import { NextResponse } from "next/server";

// Example endpoint to fetch all records from the employee table
export async function GET(request) {
  cov_903tvwx0m().f[0]++;
  let conn; // Declare conn variable to manage connection
  cov_903tvwx0m().s[0]++;
  try {
    // Establish the connection using the pool
    const pool = (cov_903tvwx0m().s[1]++, await connection());

    // Get a connection from the pool
    cov_903tvwx0m().s[2]++;
    conn = await pool.getConnection();

    // Get Staff_ID and Team input from the request
    const searchParams = (cov_903tvwx0m().s[3]++, request.nextUrl.searchParams);
    const staffID = (cov_903tvwx0m().s[4]++, searchParams.get("staffID"));

    // Check if staffID is provided
    cov_903tvwx0m().s[5]++;
    if (!staffID) {
      cov_903tvwx0m().b[0][0]++;
      cov_903tvwx0m().s[6]++;
      return NextResponse.json({
        error: "Staff_ID is required"
      }, {
        status: 400
      });
    } else {
      cov_903tvwx0m().b[0][1]++;
    }

    // Query to get Position from the Employee table
    const [positionData] = (cov_903tvwx0m().s[7]++, await conn.query(`
      SELECT Position 
      FROM Employee 
      WHERE Staff_ID = ?
    `, [staffID]));

    // Check if the query returned any results
    cov_903tvwx0m().s[8]++;
    if (positionData.length === 0) {
      cov_903tvwx0m().b[1][0]++;
      cov_903tvwx0m().s[9]++;
      return NextResponse.json({
        error: "No employee found with the provided Staff_ID"
      }, {
        status: 404
      });
    } else {
      cov_903tvwx0m().b[1][1]++;
    }

    // Extract Position from the query result
    const {
      Position
    } = (cov_903tvwx0m().s[10]++, positionData[0]);

    // Array of Director and Manager positions that can view their own team request
    const Senior_Management_Managers = (cov_903tvwx0m().s[11]++, ["MD", "Director", "Sales Manager", "Finance Manager"]);

    // Initialize data variable for query results
    let data;

    // Conditional Query based on Position
    cov_903tvwx0m().s[12]++;
    if (Senior_Management_Managers.includes(Position)) {
      cov_903tvwx0m().b[2][0]++;
      cov_903tvwx0m().s[13]++;
      [data] = await conn.query(`
            SELECT Employee.Staff_ID,
                Employee.Staff_FName,
                Employee.Staff_LName,
                Arrangement.Arrangement_ID,
                Arrangement.Request_Status,
                Arrangement.Start_Date,  
                Arrangement.Shift_Type,
                Arrangement.End_Date,
                Arrangement.Recurring_Interval,
                Arrangement.Apply_Reason,
                Arrangement.Update_Reason
            FROM Arrangement
            RIGHT JOIN Employee ON Employee.Staff_ID = Arrangement.Staff_ID
            WHERE Employee.Staff_ID IN (
                SELECT Staff_ID 
                FROM Employee 
                WHERE Reporting_Manager = ?)
            AND Arrangement.Is_Recurring = 0
            AND Arrangement.Start_Date >= DATE_ADD(NOW(), INTERVAL 24 HOUR)
            AND Arrangement.Request_Status = 'pending'
            
            UNION

            SELECT Employee.Staff_ID,
                Employee.Staff_FName,
                Employee.Staff_LName,
                GROUP_CONCAT(Arrangement.Arrangement_ID) as Arrangement_ID,
                GROUP_CONCAT(Arrangement.Request_Status) as Request_Status,
                GROUP_CONCAT(Arrangement.Start_Date) as Start_Date,  
                GROUP_CONCAT(Arrangement.Shift_Type) as Shift_Type,
                GROUP_CONCAT(Arrangement.End_Date) as End_Date,
                GROUP_CONCAT(Arrangement.Recurring_Interval) as Recurring_Interval,
                GROUP_CONCAT(Arrangement.Apply_Reason) as Apply_Reason,
                GROUP_CONCAT(Arrangement.Update_Reason) as Update_Reason
            FROM Arrangement
            RIGHT JOIN Employee ON Employee.Staff_ID = Arrangement.Staff_ID
            WHERE Employee.Staff_ID IN (
                SELECT Staff_ID 
                FROM Employee 
                WHERE Reporting_Manager = ?)
            AND Arrangement.Is_Recurring = 1
            AND Arrangement.Start_Date >= DATE_ADD(NOW(), INTERVAL 24 HOUR)
            AND Arrangement.Request_Status = 'pending'
                        
            GROUP BY Employee.Staff_ID, Arrangement.Recurring_Interval, Arrangement.End_Date, Arrangement.Shift_Type;
          `, [staffID, staffID]);
    } else {
      cov_903tvwx0m().b[2][1]++;
      cov_903tvwx0m().s[14]++;
      return NextResponse.json({
        message: "You are not a Director or Manager."
      }, {
        status: 403
      } // Updated to return a 403 status
      );
    }

    // Return the fetched data as a JSON response
    cov_903tvwx0m().s[15]++;
    return NextResponse.json(data, {
      status: 200
    });
  } catch (error) {
    cov_903tvwx0m().s[16]++;
    return NextResponse.json({
      error: "An unexpected error occurred while processing your request."
    }, {
      status: 500
    });
  } finally {
    cov_903tvwx0m().s[17]++;
    // Release the connection back to the pool if it was acquired
    if (conn) {
      cov_903tvwx0m().b[3][0]++;
      cov_903tvwx0m().s[18]++;
      conn.release();
    } else {
      cov_903tvwx0m().b[3][1]++;
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOTAzdHZ3eDBtIiwiYWN0dWFsQ292ZXJhZ2UiLCJjb25uZWN0aW9uIiwiTmV4dFJlc3BvbnNlIiwiR0VUIiwicmVxdWVzdCIsImYiLCJjb25uIiwicyIsInBvb2wiLCJnZXRDb25uZWN0aW9uIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInN0YWZmSUQiLCJnZXQiLCJiIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicG9zaXRpb25EYXRhIiwicXVlcnkiLCJsZW5ndGgiLCJQb3NpdGlvbiIsIlNlbmlvcl9NYW5hZ2VtZW50X01hbmFnZXJzIiwiZGF0YSIsImluY2x1ZGVzIiwibWVzc2FnZSIsInJlbGVhc2UiXSwic291cmNlcyI6WyJyb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29ubmVjdGlvbiBmcm9tIFwiQC9hcHAvbGliL2RiXCI7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcblxuLy8gRXhhbXBsZSBlbmRwb2ludCB0byBmZXRjaCBhbGwgcmVjb3JkcyBmcm9tIHRoZSBlbXBsb3llZSB0YWJsZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XG4gIGxldCBjb25uOyAvLyBEZWNsYXJlIGNvbm4gdmFyaWFibGUgdG8gbWFuYWdlIGNvbm5lY3Rpb25cbiAgdHJ5IHtcbiAgICAvLyBFc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdXNpbmcgdGhlIHBvb2xcbiAgICBjb25zdCBwb29sID0gYXdhaXQgY29ubmVjdGlvbigpO1xuXG4gICAgLy8gR2V0IGEgY29ubmVjdGlvbiBmcm9tIHRoZSBwb29sXG4gICAgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuXG4gICAgLy8gR2V0IFN0YWZmX0lEIGFuZCBUZWFtIGlucHV0IGZyb20gdGhlIHJlcXVlc3RcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHN0YWZmSUQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwic3RhZmZJRFwiKTtcblxuICAgIC8vIENoZWNrIGlmIHN0YWZmSUQgaXMgcHJvdmlkZWRcbiAgICBpZiAoIXN0YWZmSUQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJTdGFmZl9JRCBpcyByZXF1aXJlZFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBRdWVyeSB0byBnZXQgUG9zaXRpb24gZnJvbSB0aGUgRW1wbG95ZWUgdGFibGVcbiAgICBjb25zdCBbcG9zaXRpb25EYXRhXSA9IGF3YWl0IGNvbm4ucXVlcnkoXG4gICAgICBgXG4gICAgICBTRUxFQ1QgUG9zaXRpb24gXG4gICAgICBGUk9NIEVtcGxveWVlIFxuICAgICAgV0hFUkUgU3RhZmZfSUQgPSA/XG4gICAgYCxcbiAgICAgIFtzdGFmZklEXSxcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHF1ZXJ5IHJldHVybmVkIGFueSByZXN1bHRzXG4gICAgaWYgKHBvc2l0aW9uRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJObyBlbXBsb3llZSBmb3VuZCB3aXRoIHRoZSBwcm92aWRlZCBTdGFmZl9JRFwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IFBvc2l0aW9uIGZyb20gdGhlIHF1ZXJ5IHJlc3VsdFxuICAgIGNvbnN0IHsgUG9zaXRpb24gfSA9IHBvc2l0aW9uRGF0YVswXTtcblxuICAgIC8vIEFycmF5IG9mIERpcmVjdG9yIGFuZCBNYW5hZ2VyIHBvc2l0aW9ucyB0aGF0IGNhbiB2aWV3IHRoZWlyIG93biB0ZWFtIHJlcXVlc3RcbiAgICBjb25zdCBTZW5pb3JfTWFuYWdlbWVudF9NYW5hZ2VycyA9IFtcbiAgICAgIFwiTURcIixcbiAgICAgIFwiRGlyZWN0b3JcIixcbiAgICAgIFwiU2FsZXMgTWFuYWdlclwiLFxuICAgICAgXCJGaW5hbmNlIE1hbmFnZXJcIixcbiAgICBdO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBkYXRhIHZhcmlhYmxlIGZvciBxdWVyeSByZXN1bHRzXG4gICAgbGV0IGRhdGE7XG5cbiAgICAvLyBDb25kaXRpb25hbCBRdWVyeSBiYXNlZCBvbiBQb3NpdGlvblxuICAgIGlmIChTZW5pb3JfTWFuYWdlbWVudF9NYW5hZ2Vycy5pbmNsdWRlcyhQb3NpdGlvbikpIHtcbiAgICAgIFtkYXRhXSA9IGF3YWl0IGNvbm4ucXVlcnkoXG4gICAgICAgIGBcbiAgICAgICAgICAgIFNFTEVDVCBFbXBsb3llZS5TdGFmZl9JRCxcbiAgICAgICAgICAgICAgICBFbXBsb3llZS5TdGFmZl9GTmFtZSxcbiAgICAgICAgICAgICAgICBFbXBsb3llZS5TdGFmZl9MTmFtZSxcbiAgICAgICAgICAgICAgICBBcnJhbmdlbWVudC5BcnJhbmdlbWVudF9JRCxcbiAgICAgICAgICAgICAgICBBcnJhbmdlbWVudC5SZXF1ZXN0X1N0YXR1cyxcbiAgICAgICAgICAgICAgICBBcnJhbmdlbWVudC5TdGFydF9EYXRlLCAgXG4gICAgICAgICAgICAgICAgQXJyYW5nZW1lbnQuU2hpZnRfVHlwZSxcbiAgICAgICAgICAgICAgICBBcnJhbmdlbWVudC5FbmRfRGF0ZSxcbiAgICAgICAgICAgICAgICBBcnJhbmdlbWVudC5SZWN1cnJpbmdfSW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgQXJyYW5nZW1lbnQuQXBwbHlfUmVhc29uLFxuICAgICAgICAgICAgICAgIEFycmFuZ2VtZW50LlVwZGF0ZV9SZWFzb25cbiAgICAgICAgICAgIEZST00gQXJyYW5nZW1lbnRcbiAgICAgICAgICAgIFJJR0hUIEpPSU4gRW1wbG95ZWUgT04gRW1wbG95ZWUuU3RhZmZfSUQgPSBBcnJhbmdlbWVudC5TdGFmZl9JRFxuICAgICAgICAgICAgV0hFUkUgRW1wbG95ZWUuU3RhZmZfSUQgSU4gKFxuICAgICAgICAgICAgICAgIFNFTEVDVCBTdGFmZl9JRCBcbiAgICAgICAgICAgICAgICBGUk9NIEVtcGxveWVlIFxuICAgICAgICAgICAgICAgIFdIRVJFIFJlcG9ydGluZ19NYW5hZ2VyID0gPylcbiAgICAgICAgICAgIEFORCBBcnJhbmdlbWVudC5Jc19SZWN1cnJpbmcgPSAwXG4gICAgICAgICAgICBBTkQgQXJyYW5nZW1lbnQuU3RhcnRfRGF0ZSA+PSBEQVRFX0FERChOT1coKSwgSU5URVJWQUwgMjQgSE9VUilcbiAgICAgICAgICAgIEFORCBBcnJhbmdlbWVudC5SZXF1ZXN0X1N0YXR1cyA9ICdwZW5kaW5nJ1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBVTklPTlxuXG4gICAgICAgICAgICBTRUxFQ1QgRW1wbG95ZWUuU3RhZmZfSUQsXG4gICAgICAgICAgICAgICAgRW1wbG95ZWUuU3RhZmZfRk5hbWUsXG4gICAgICAgICAgICAgICAgRW1wbG95ZWUuU3RhZmZfTE5hbWUsXG4gICAgICAgICAgICAgICAgR1JPVVBfQ09OQ0FUKEFycmFuZ2VtZW50LkFycmFuZ2VtZW50X0lEKSBhcyBBcnJhbmdlbWVudF9JRCxcbiAgICAgICAgICAgICAgICBHUk9VUF9DT05DQVQoQXJyYW5nZW1lbnQuUmVxdWVzdF9TdGF0dXMpIGFzIFJlcXVlc3RfU3RhdHVzLFxuICAgICAgICAgICAgICAgIEdST1VQX0NPTkNBVChBcnJhbmdlbWVudC5TdGFydF9EYXRlKSBhcyBTdGFydF9EYXRlLCAgXG4gICAgICAgICAgICAgICAgR1JPVVBfQ09OQ0FUKEFycmFuZ2VtZW50LlNoaWZ0X1R5cGUpIGFzIFNoaWZ0X1R5cGUsXG4gICAgICAgICAgICAgICAgR1JPVVBfQ09OQ0FUKEFycmFuZ2VtZW50LkVuZF9EYXRlKSBhcyBFbmRfRGF0ZSxcbiAgICAgICAgICAgICAgICBHUk9VUF9DT05DQVQoQXJyYW5nZW1lbnQuUmVjdXJyaW5nX0ludGVydmFsKSBhcyBSZWN1cnJpbmdfSW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgR1JPVVBfQ09OQ0FUKEFycmFuZ2VtZW50LkFwcGx5X1JlYXNvbikgYXMgQXBwbHlfUmVhc29uLFxuICAgICAgICAgICAgICAgIEdST1VQX0NPTkNBVChBcnJhbmdlbWVudC5VcGRhdGVfUmVhc29uKSBhcyBVcGRhdGVfUmVhc29uXG4gICAgICAgICAgICBGUk9NIEFycmFuZ2VtZW50XG4gICAgICAgICAgICBSSUdIVCBKT0lOIEVtcGxveWVlIE9OIEVtcGxveWVlLlN0YWZmX0lEID0gQXJyYW5nZW1lbnQuU3RhZmZfSURcbiAgICAgICAgICAgIFdIRVJFIEVtcGxveWVlLlN0YWZmX0lEIElOIChcbiAgICAgICAgICAgICAgICBTRUxFQ1QgU3RhZmZfSUQgXG4gICAgICAgICAgICAgICAgRlJPTSBFbXBsb3llZSBcbiAgICAgICAgICAgICAgICBXSEVSRSBSZXBvcnRpbmdfTWFuYWdlciA9ID8pXG4gICAgICAgICAgICBBTkQgQXJyYW5nZW1lbnQuSXNfUmVjdXJyaW5nID0gMVxuICAgICAgICAgICAgQU5EIEFycmFuZ2VtZW50LlN0YXJ0X0RhdGUgPj0gREFURV9BREQoTk9XKCksIElOVEVSVkFMIDI0IEhPVVIpXG4gICAgICAgICAgICBBTkQgQXJyYW5nZW1lbnQuUmVxdWVzdF9TdGF0dXMgPSAncGVuZGluZydcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgR1JPVVAgQlkgRW1wbG95ZWUuU3RhZmZfSUQsIEFycmFuZ2VtZW50LlJlY3VycmluZ19JbnRlcnZhbCwgQXJyYW5nZW1lbnQuRW5kX0RhdGUsIEFycmFuZ2VtZW50LlNoaWZ0X1R5cGU7XG4gICAgICAgICAgYCxcbiAgICAgICAgW3N0YWZmSUQsIHN0YWZmSURdLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IG1lc3NhZ2U6IFwiWW91IGFyZSBub3QgYSBEaXJlY3RvciBvciBNYW5hZ2VyLlwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfSwgLy8gVXBkYXRlZCB0byByZXR1cm4gYSA0MDMgc3RhdHVzXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgZmV0Y2hlZCBkYXRhIGFzIGEgSlNPTiByZXNwb25zZVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhLCB7IHN0YXR1czogMjAwIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGlsZSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC5cIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBSZWxlYXNlIHRoZSBjb25uZWN0aW9uIGJhY2sgdG8gdGhlIHBvb2wgaWYgaXQgd2FzIGFjcXVpcmVkXG4gICAgaWYgKGNvbm4pIHtcbiAgICAgIGNvbm4ucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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